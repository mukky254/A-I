<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. GenZ - AI Smart Doctor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #3b82f6;
            --sidebar: #1f2937;
            --chat-bg: #111827;
            --message-user: #374151;
            --message-bot: #1e293b;
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --border: #4b5563;
            --input-bg: #374151;
            --user-bubble: #10b981;
            --bot-bubble: #475569;
            --voice-active: #ef4444;
            --emergency-color: #ef4444;
            --warning-color: #f59e0b;
            --success-color: #10b981;
            --header-height: 60px;
            --footer-height: 70px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--chat-bg);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
        }
        
        /* Mobile Header */
        .mobile-header {
            display: none;
            height: var(--header-height);
            background-color: var(--sidebar);
            padding: 0 16px;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }
        
        .mobile-menu-btn {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
        }
        
        .mobile-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background-color: var(--sidebar);
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border);
            transition: transform 0.3s ease;
            z-index: 50;
        }
        
        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .sidebar-logo {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .sidebar-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .new-chat-btn {
            margin: 12px;
            padding: 12px;
            background-color: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
        }
        
        .new-chat-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .new-chat-btn i {
            font-size: 16px;
        }
        
        .history {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }
        
        .history-item {
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 4px;
            color: var(--text-secondary);
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .history-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .sidebar-footer {
            padding: 12px;
            border-top: 1px solid var(--border);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .user-info:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        /* Main Chat Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .chat-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .specialty-indicator {
            font-size: 14px;
            padding: 4px 8px;
            border-radius: 12px;
            background-color: var(--secondary);
        }
        
        .model-selector {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .model-selector select {
            background-color: var(--input-bg);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 6px 8px;
            font-size: 14px;
            outline: none;
        }
        
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .message {
            display: flex;
            max-width: 100%;
            line-height: 1.6;
        }
        
        .user-message {
            justify-content: flex-end;
        }
        
        .bot-message {
            justify-content: flex-start;
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            margin: 0 8px;
        }
        
        .user-avatar {
            background: linear-gradient(135deg, var(--user-bubble), var(--primary-dark));
        }
        
        .bot-avatar {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
        }
        
        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
        }
        
        .user-message .message-content {
            background-color: var(--user-bubble);
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .bot-message .message-content {
            background-color: var(--bot-bubble);
            color: var(--text-primary);
            border-bottom-left-radius: 4px;
        }
        
        .message-sender {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* Medical Alert Styling */
        .medical-alert {
            background-color: rgba(239, 68, 68, 0.2);
            border-left: 4px solid var(--emergency-color);
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 4px;
        }
        
        .medical-warning {
            background-color: rgba(245, 158, 11, 0.2);
            border-left: 4px solid var(--warning-color);
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 4px;
        }
        
        .medical-advice {
            background-color: rgba(16, 185, 129, 0.2);
            border-left: 4px solid var(--success-color);
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 4px;
        }
        
        /* Input Area */
        .input-container {
            padding: 16px;
            position: relative;
            background-color: var(--sidebar);
            border-top: 1px solid var(--border);
        }
        
        .input-wrapper {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .user-input {
            width: 100%;
            padding: 12px 44px 12px 12px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            resize: none;
            outline: none;
            line-height: 1.5;
            max-height: 120px;
            min-height: 44px;
        }
        
        .user-input:focus {
            border-color: var(--primary);
        }
        
        .input-buttons {
            position: absolute;
            right: 8px;
            bottom: 8px;
            display: flex;
            gap: 4px;
        }
        
        .input-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
        }
        
        .input-btn:hover {
            color: var(--text-primary);
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .send-btn {
            background-color: var(--primary);
            color: white;
        }
        
        .send-btn:hover {
            background-color: var(--primary-dark);
        }
        
        .send-btn:disabled {
            background-color: var(--border);
            cursor: not-allowed;
        }
        
        /* Voice Controls */
        .voice-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        
        .voice-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 10px 14px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 13px;
            min-width: 80px;
        }
        
        .voice-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .voice-btn.active {
            background-color: var(--voice-active);
            color: white;
        }
        
        .voice-btn i {
            font-size: 18px;
        }
        
        .voice-btn-text {
            font-size: 12px;
        }
        
        /* Voice Visualization */
        .voice-visualizer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3px;
            margin-top: 8px;
            height: 20px;
        }
        
        .voice-bar {
            width: 3px;
            height: 4px;
            background-color: var(--text-muted);
            border-radius: 2px;
            transition: height 0.1s ease;
        }
        
        .voice-bar.active {
            background-color: var(--voice-active);
        }
        
        /* Status and Typing Indicators */
        .status-bar {
            padding: 8px 16px;
            background-color: var(--sidebar);
            border-top: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-muted);
            height: var(--footer-height);
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--primary);
        }
        
        .status-dot.thinking {
            background-color: #f59e0b;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-muted);
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        /* Welcome Screen */
        .welcome-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--chat-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
            overflow-y: auto;
        }
        
        .welcome-content {
            max-width: 600px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 24px;
            width: 100%;
        }
        
        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .welcome-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .user-info-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
            background-color: var(--sidebar);
            padding: 24px;
            border-radius: 12px;
            border: 1px solid var(--border);
            max-width: 400px;
            width: 100%;
            margin: 0 auto;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-group label {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: left;
        }
        
        .form-group input, .form-group select {
            padding: 12px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
        }
        
        .start-chat-btn {
            padding: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 8px;
        }
        
        .start-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        /* Medical Tools Section */
        .medical-tools {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .tool-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 10px 12px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            min-width: 70px;
        }
        
        .tool-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }
        
        .tool-btn i {
            font-size: 18px;
        }
        
        /* Emergency Notice */
        .emergency-notice {
            background-color: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--emergency-color);
            border-radius: 8px;
            padding: 12px;
            margin: 16px 0;
            text-align: center;
            font-size: 14px;
        }
        
        /* Overlay for mobile sidebar */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
        
        /* Responsive Design */
        /* Tablets */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }
            
            .message-content {
                max-width: 80%;
            }
            
            .chat-header {
                padding: 16px;
            }
            
            .messages-container {
                padding: 16px;
            }
        }
        
        /* Mobile Devices */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .mobile-header {
                display: flex;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: -260px;
                bottom: 0;
                z-index: 50;
                width: 260px;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .main-content {
                margin-top: var(--header-height);
                margin-bottom: var(--footer-height);
            }
            
            .chat-header {
                display: none;
            }
            
            .messages-container {
                padding: 12px;
            }
            
            .message-content {
                max-width: 85%;
            }
            
            .input-container {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                padding: 12px;
                z-index: 30;
            }
            
            .status-bar {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                z-index: 20;
            }
            
            .voice-controls {
                gap: 8px;
            }
            
            .voice-btn {
                padding: 8px 10px;
                min-width: 70px;
                font-size: 12px;
            }
            
            .medical-tools {
                gap: 6px;
            }
            
            .tool-btn {
                padding: 8px 10px;
                min-width: 65px;
                font-size: 11px;
            }
            
            .welcome-content {
                padding: 0 16px;
            }
            
            .welcome-title {
                font-size: 28px;
            }
            
            .welcome-subtitle {
                font-size: 16px;
            }
            
            .user-info-form {
                padding: 20px;
            }
        }
        
        /* Small Mobile Devices */
        @media (max-width: 480px) {
            .message-content {
                max-width: 90%;
            }
            
            .messages-container {
                padding: 8px;
                gap: 12px;
            }
            
            .message-avatar {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            
            .message-content {
                padding: 10px 14px;
                font-size: 14px;
            }
            
            .voice-controls {
                gap: 6px;
            }
            
            .voice-btn {
                padding: 6px 8px;
                min-width: 60px;
                font-size: 11px;
            }
            
            .medical-tools {
                gap: 4px;
            }
            
            .tool-btn {
                padding: 6px 8px;
                min-width: 60px;
                font-size: 10px;
            }
            
            .tool-btn i {
                font-size: 16px;
            }
            
            .status-bar {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            .welcome-title {
                font-size: 24px;
            }
            
            .welcome-subtitle {
                font-size: 15px;
            }
            
            .user-info-form {
                padding: 16px;
            }
        }
        
        /* Very Small Mobile Devices */
        @media (max-width: 360px) {
            .mobile-header {
                padding: 0 12px;
            }
            
            .mobile-title {
                font-size: 16px;
            }
            
            .messages-container {
                padding: 6px;
            }
            
            .message-content {
                max-width: 95%;
                padding: 8px 12px;
            }
            
            .input-container {
                padding: 10px;
            }
            
            .user-input {
                padding: 10px 40px 10px 10px;
                font-size: 15px;
            }
            
            .voice-controls {
                gap: 4px;
            }
            
            .voice-btn {
                padding: 6px;
                min-width: 55px;
            }
            
            .medical-tools {
                gap: 3px;
            }
            
            .tool-btn {
                padding: 6px;
                min-width: 55px;
            }
        }
        
        /* Landscape Mode for Mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .welcome-screen {
                padding: 10px;
                overflow-y: auto;
            }
            
            .welcome-content {
                gap: 16px;
            }
            
            .welcome-title {
                font-size: 24px;
            }
            
            .welcome-subtitle {
                font-size: 14px;
            }
            
            .user-info-form {
                padding: 16px;
                max-width: 350px;
            }
            
            .messages-container {
                padding: 8px;
            }
            
            .input-container {
                padding: 8px;
            }
            
            .medical-tools {
                margin-top: 8px;
            }
        }
        
        /* High DPI Screens */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .message-content {
                border-radius: 20px;
            }
            
            .tool-btn, .voice-btn {
                border-radius: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Header -->
    <div class="mobile-header">
        <button class="mobile-menu-btn" id="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>
        <div class="mobile-title">Dr. GenZ</div>
        <div style="width: 40px;"></div> <!-- Spacer for balance -->
    </div>
    
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    
    <div class="app-container">
        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcome-screen">
            <div class="welcome-content">
                <h1 class="welcome-title">Dr. GenZ</h1>
                <p class="welcome-subtitle">Your AI Smart Doctor, ready to provide personalized medical guidance and health insights. Please note: This is an AI assistant, not a replacement for professional medical care.</p>
                
                <div class="emergency-notice">
                    <strong><i class="fas fa-exclamation-triangle"></i> Medical Emergency Notice:</strong> If you're experiencing a medical emergency, please call your local emergency services immediately.
                </div>
                
                <div class="user-info-form" id="user-info-form">
                    <div class="form-group">
                        <label for="user-name"><i class="fas fa-user"></i> What's your name?</label>
                        <input type="text" id="user-name" placeholder="Enter your name">
                    </div>
                    
                    <div class="form-group">
                        <label for="user-age"><i class="fas fa-calendar-alt"></i> Your Age</label>
                        <input type="number" id="user-age" placeholder="Enter your age" min="1" max="120">
                    </div>
                    
                    <div class="form-group">
                        <label for="user-gender"><i class="fas fa-venus-mars"></i> Gender</label>
                        <select id="user-gender">
                            <option value="">Select your gender</option>
                            <option value="female">Female</option>
                            <option value="male">Male</option>
                            <option value="other">Other</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                    </div>
                    
                    <button class="start-chat-btn" id="start-chat-btn">
                        <i class="fas fa-comment-medical"></i> Start Consultation
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">D</div>
                <div class="sidebar-title">Dr. GenZ</div>
            </div>
            
            <button class="new-chat-btn">
                <i class="fas fa-plus"></i> New Consultation
            </button>
            <div class="history">
                <div class="history-item"><i class="fas fa-head-side-cough"></i> Headache and fatigue consultation</div>
                <div class="history-item"><i class="fas fa-allergies"></i> Seasonal allergy symptoms</div>
                <div class="history-item"><i class="fas fa-bed"></i> Sleep quality assessment</div>
                <div class="history-item"><i class="fas fa-apple-alt"></i> Diet and nutrition advice</div>
                <div class="history-item"><i class="fas fa-heartbeat"></i> Heart palpitations discussion</div>
                <div class="history-item"><i class="fas fa-lungs"></i> Breathing difficulties evaluation</div>
            </div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">D</div>
                    <div>
                        <div style="font-weight: 600;">Dr. GenZ</div>
                        <div style="font-size: 12px; color: var(--text-muted);">AI Medical Assistant</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="main-content">
            <div class="chat-header">
                <div class="chat-title">
                    Dr. GenZ
                    <div class="specialty-indicator" id="specialty-indicator">General Medicine</div>
                </div>
                <div class="model-selector">
                    <label>Specialty:</label>
                    <select id="model-select">
                        <option value="general">General Medicine</option>
                        <option value="pediatrics">Pediatrics</option>
                        <option value="cardiology">Cardiology</option>
                        <option value="dermatology">Dermatology</option>
                        <option value="mental">Mental Health</option>
                    </select>
                </div>
            </div>
            
            <div class="messages-container" id="messages-container">
                <!-- Messages will be added here dynamically -->
            </div>
            
            <div class="medical-tools">
                <button class="tool-btn" id="symptom-checker-btn">
                    <i class="fas fa-stethoscope"></i>
                    <span>Symptom Checker</span>
                </button>
                <button class="tool-btn" id="health-tracker-btn">
                    <i class="fas fa-heartbeat"></i>
                    <span>Health Tracker</span>
                </button>
                <button class="tool-btn" id="diagnostic-assistant-btn">
                    <i class="fas fa-microscope"></i>
                    <span>Diagnostic Assistant</span>
                </button>
                <button class="tool-btn" id="preventive-care-btn">
                    <i class="fas fa-shield-alt"></i>
                    <span>Preventive Care</span>
                </button>
                <button class="tool-btn" id="medication-btn">
                    <i class="fas fa-pills"></i>
                    <span>Medications</span>
                </button>
            </div>
            
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea class="user-input" id="user-input" placeholder="Describe your symptoms or health concerns..." rows="1"></textarea>
                    <div class="input-buttons">
                        <button class="input-btn" id="voice-input-btn" title="Voice Input">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="input-btn send-btn" id="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Voice Controls -->
                <div class="voice-controls">
                    <button class="voice-btn" id="start-voice-btn">
                        <i class="fas fa-microphone"></i>
                        <span class="voice-btn-text">Voice Input</span>
                    </button>
                    <button class="voice-btn" id="stop-voice-btn" disabled>
                        <i class="fas fa-stop"></i>
                        <span class="voice-btn-text">Stop Voice</span>
                    </button>
                    <button class="voice-btn" id="toggle-speech-btn">
                        <i class="fas fa-volume-up"></i>
                        <span class="voice-btn-text">Voice: ON</span>
                    </button>
                </div>
                
                <!-- Voice Visualization -->
                <div class="voice-visualizer" id="voice-visualizer" style="display: none;">
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                    <div class="voice-bar"></div>
                </div>
            </div>
            
            <div class="status-bar">
                <div class="status">
                    <div class="status-dot" id="status-dot"></div>
                    <span id="status-text">Ready for consultation</span>
                </div>
                <div class="typing-indicator" id="typing-indicator" style="display: none;">
                    <span>Dr. GenZ is analyzing</span>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const userInfoForm = document.getElementById('user-info-form');
        const userNameInput = document.getElementById('user-name');
        const userAgeInput = document.getElementById('user-age');
        const userGenderSelect = document.getElementById('user-gender');
        const startChatBtn = document.getElementById('start-chat-btn');
        const messagesContainer = document.getElementById('messages-container');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const voiceInputBtn = document.getElementById('voice-input-btn');
        const startVoiceBtn = document.getElementById('start-voice-btn');
        const stopVoiceBtn = document.getElementById('stop-voice-btn');
        const toggleSpeechBtn = document.getElementById('toggle-speech-btn');
        const voiceVisualizer = document.getElementById('voice-visualizer');
        const statusText = document.getElementById('status-text');
        const statusDot = document.getElementById('status-dot');
        const typingIndicator = document.getElementById('typing-indicator');
        const specialtyIndicator = document.getElementById('specialty-indicator');
        const modelSelect = document.getElementById('model-select');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        
        // Medical tool buttons
        const symptomCheckerBtn = document.getElementById('symptom-checker-btn');
        const healthTrackerBtn = document.getElementById('health-tracker-btn');
        const diagnosticAssistantBtn = document.getElementById('diagnostic-assistant-btn');
        const preventiveCareBtn = document.getElementById('preventive-care-btn');
        const medicationBtn = document.getElementById('medication-btn');
        
        // User information
        let userName = '';
        let userAge = '';
        let userGender = '';
        let isChatStarted = false;
        
        // Voice settings
        let isSpeechEnabled = true;
        let isVoiceActive = false;
        let voiceBars = [];
        
        // Mobile sidebar state
        let isSidebarOpen = false;
        
        // API Configuration for Groq
        const GROQ_API_URL = "https://api.groq.com/openai/v1/chat/completions";
        const API_KEY = "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";
        
        // Available Groq Models
        const GROQ_MODELS = {
            "llama-3.1-8b-instant": "llama-3.1-8b-instant",
            "llama-3.1-70b-versatile": "llama-3.1-70b-versatile", 
            "mixtral-8x7b-32768": "mixtral-8x7b-32768",
            "gemma2-9b-it": "gemma2-9b-it"
        };
        
        // Conversation history
        let conversationHistory = [];
        
        // Initialize voice visualization bars
        function initializeVoiceVisualizer() {
            voiceBars = Array.from(voiceVisualizer.querySelectorAll('.voice-bar'));
        }
        
        // Update voice visualization
        function updateVoiceVisualization(volume) {
            if (!isVoiceActive) return;
            
            voiceBars.forEach((bar, index) => {
                const shouldBeActive = index < Math.floor(volume / 10);
                if (shouldBeActive) {
                    bar.classList.add('active');
                    bar.style.height = `${10 + (index * 5)}px`;
                } else {
                    bar.classList.remove('active');
                    bar.style.height = '4px';
                }
            });
        }
        
        // Auto-resize textarea
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
        
        // Mobile sidebar toggle
        function toggleSidebar() {
            isSidebarOpen = !isSidebarOpen;
            sidebar.classList.toggle('open', isSidebarOpen);
            sidebarOverlay.classList.toggle('active', isSidebarOpen);
            
            // Update menu icon
            const menuIcon = mobileMenuBtn.querySelector('i');
            if (isSidebarOpen) {
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
            } else {
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            }
        }
        
        mobileMenuBtn.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);
        
        // Close sidebar when clicking on a history item (mobile)
        document.querySelectorAll('.history-item').forEach(item => {
            item.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    toggleSidebar();
                }
            });
        });
        
        // Speech Recognition Setup
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        let isListening = false;
        
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = true;
            recognition.lang = 'en-US';
            
            recognition.onstart = function() {
                statusText.textContent = "Listening... Please describe your symptoms";
                voiceInputBtn.style.color = "#ef4444";
                startVoiceBtn.classList.add('active');
                stopVoiceBtn.disabled = false;
                isListening = true;
                isVoiceActive = true;
                voiceVisualizer.style.display = 'flex';
            };
            
            recognition.onresult = function(event) {
                const transcript = Array.from(event.results)
                    .map(result => result[0])
                    .map(result => result.transcript)
                    .join('');
                
                userInput.value = transcript;
                userInput.dispatchEvent(new Event('input'));
                
                // Simulate voice visualization based on transcript length
                const volume = Math.min(100, transcript.length * 2);
                updateVoiceVisualization(volume);
            };
            
            recognition.onerror = function(event) {
                console.error("Speech recognition error:", event.error);
                statusText.textContent = "Error: " + event.error;
                voiceInputBtn.style.color = "";
                startVoiceBtn.classList.remove('active');
                stopVoiceBtn.disabled = true;
                isListening = false;
                isVoiceActive = false;
                voiceVisualizer.style.display = 'none';
            };
            
            recognition.onend = function() {
                if (isListening) {
                    statusText.textContent = "Processing your symptoms...";
                    voiceInputBtn.style.color = "";
                    startVoiceBtn.classList.remove('active');
                    stopVoiceBtn.disabled = true;
                    isListening = false;
                    isVoiceActive = false;
                    voiceVisualizer.style.display = 'none';
                    
                    // Auto-send if there's text
                    if (userInput.value.trim()) {
                        setTimeout(() => {
                            sendMessage();
                        }, 500);
                    }
                }
            };
        } else {
            voiceInputBtn.disabled = true;
            startVoiceBtn.disabled = true;
            voiceInputBtn.title = "Speech Recognition not supported in your browser";
            startVoiceBtn.title = "Speech Recognition not supported in your browser";
        }
        
        // Event Listeners
        startChatBtn.addEventListener('click', startChat);
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        voiceInputBtn.addEventListener('click', toggleVoiceRecognition);
        startVoiceBtn.addEventListener('click', startVoiceRecognition);
        stopVoiceBtn.addEventListener('click', stopVoiceRecognition);
        toggleSpeechBtn.addEventListener('click', toggleSpeech);
        
        // Medical tool button event listeners
        symptomCheckerBtn.addEventListener('click', function() {
            if (!isChatStarted) {
                alert("Please complete the setup first.");
                return;
            }
            addMessage("I'd like to use the symptom checker. What symptoms should I describe?", true);
            setTimeout(() => {
                addMessage("Of course. Please describe all your symptoms in detail, including when they started, their severity, and any factors that make them better or worse.", false);
                if (isSpeechEnabled) {
                    speakResponse("Of course. Please describe all your symptoms in detail, including when they started, their severity, and any factors that make them better or worse.");
                }
            }, 500);
        });
        
        healthTrackerBtn.addEventListener('click', function() {
            if (!isChatStarted) {
                alert("Please complete the setup first.");
                return;
            }
            addMessage("I want to track my health data.", true);
            setTimeout(() => {
                addMessage("Excellent. I can help you track various health metrics. Please share your current vitals like blood pressure, heart rate, weight, or any medications you're taking. You can also ask me to set reminders for medications or appointments.", false);
                if (isSpeechEnabled) {
                    speakResponse("Excellent. I can help you track various health metrics. Please share your current vitals like blood pressure, heart rate, weight, or any medications you're taking.");
                }
            }, 500);
        });
        
        diagnosticAssistantBtn.addEventListener('click', function() {
            if (!isChatStarted) {
                alert("Please complete the setup first.");
                return;
            }
            addMessage("I need help interpreting diagnostic results.", true);
            setTimeout(() => {
                addMessage("I can assist with understanding lab results or diagnostic reports. Please share the details of your test results, and I'll help explain what they might indicate. Remember, I can provide information but not medical diagnoses.", false);
                if (isSpeechEnabled) {
                    speakResponse("I can assist with understanding lab results or diagnostic reports. Please share the details of your test results, and I'll help explain what they might indicate.");
                }
            }, 500);
        });
        
        preventiveCareBtn.addEventListener('click', function() {
            if (!isChatStarted) {
                alert("Please complete the setup first.");
                return;
            }
            addMessage("I'd like preventive health advice.", true);
            setTimeout(() => {
                addMessage("Preventive care is essential for long-term health. Tell me about your lifestyle - diet, exercise, sleep patterns, stress levels, and any family medical history. I'll provide personalized recommendations for maintaining your health.", false);
                if (isSpeechEnabled) {
                    speakResponse("Preventive care is essential for long-term health. Tell me about your lifestyle - diet, exercise, sleep patterns, stress levels, and any family medical history.");
                }
            }, 500);
        });
        
        medicationBtn.addEventListener('click', function() {
            if (!isChatStarted) {
                alert("Please complete the setup first.");
                return;
            }
            addMessage("I have questions about medications.", true);
            setTimeout(() => {
                addMessage("I can provide information about medications, their uses, side effects, and interactions. Please tell me which medication you're asking about or describe your medication concerns. Remember to always consult with a healthcare provider before making any changes to your medications.", false);
                if (isSpeechEnabled) {
                    speakResponse("I can provide information about medications, their uses, side effects, and interactions. Please tell me which medication you're asking about or describe your medication concerns.");
                }
            }, 500);
        });
        
        // Functions
        function startChat() {
            userName = userNameInput.value.trim();
            userAge = userAgeInput.value.trim();
            userGender = userGenderSelect.value;
            
            if (!userName) {
                alert("Please enter your name to begin.");
                return;
            }
            
            if (!userAge) {
                alert("Please enter your age for personalized medical advice.");
                return;
            }
            
            if (!userGender) {
                alert("Please select your gender for appropriate medical guidance.");
                return;
            }
            
            // Hide welcome screen
            welcomeScreen.style.display = 'none';
            isChatStarted = true;
            
            // Set up the system message
            const systemMessage = createSystemMessage();
            conversationHistory = [systemMessage];
            
            // Add initial greeting from Dr. GenZ
            addMessage(getInitialGreeting(), false);
            
            // Speak the greeting if speech is enabled
            if (isSpeechEnabled) {
                speakResponse(getInitialGreeting());
            }
            
            statusText.textContent = `Consulting with ${userName}`;
        }
        
        function createSystemMessage() {
            const specialty = modelSelect.value;
            let specialtyFocus = '';
            
            switch(specialty) {
                case 'general':
                    specialtyFocus = 'You are a general practitioner with broad medical knowledge.';
                    break;
                case 'pediatrics':
                    specialtyFocus = 'You specialize in pediatric care and children\'s health.';
                    break;
                case 'cardiology':
                    specialtyFocus = 'You specialize in heart health and cardiovascular conditions.';
                    break;
                case 'dermatology':
                    specialtyFocus = 'You specialize in skin conditions and dermatological health.';
                    break;
                case 'mental':
                    specialtyFocus = 'You specialize in mental health and psychological well-being.';
                    break;
            }
            
            return {
                role: "system",
                content: `You are Dr. GenZ, an AI medical assistant designed to provide health information and guidance.
                The user is ${userName}, ${userAge} years old, who identifies as ${userGender}.
                
                ${specialtyFocus}
                
                IMPORTANT MEDICAL DISCLAIMER: You are an AI assistant, not a licensed medical professional. 
                You cannot provide medical diagnoses, prescribe treatments, or replace professional medical care.
                
                Your role is to:
                - Provide general health information and education
                - Help users understand their symptoms
                - Explain medical terms and conditions
                - Offer lifestyle and wellness advice
                - Guide users on when to seek professional medical care
                
                Always include appropriate medical disclaimers in your responses.
                If symptoms suggest a serious condition, advise immediate medical attention.
                Be empathetic, clear, and professional in your communication.
                Ask follow-up questions to gather relevant health information.
                Provide evidence-based information when possible.
                Respect user privacy and maintain confidentiality.
                
                Current conversation context: ${userName} is seeking medical information and guidance.`
            };
        }
        
        function getInitialGreeting() {
            const age = parseInt(userAge);
            let ageGroup = '';
            
            if (age < 18) ageGroup = 'young';
            else if (age < 40) ageGroup = 'adult';
            else if (age < 65) ageGroup = 'middle-aged';
            else ageGroup = 'senior';
            
            const greetings = [
                `Hello ${userName}, I'm Dr. GenZ. I understand you're ${userAge} years old. I'm here to provide health information and guidance. Please remember that I'm an AI assistant, not a replacement for professional medical care. How can I help you today?`,
                `Welcome ${userName}. I'm Dr. GenZ, your AI medical assistant. I see you're ${userAge} years old. I can help answer health questions and provide general medical information. What would you like to discuss?`,
                `Good day ${userName}. I'm Dr. GenZ. As a ${ageGroup} individual aged ${userAge}, you may have specific health considerations. I'm here to provide information and guidance. What health concerns would you like to address?`
            ];
            
            return greetings[Math.floor(Math.random() * greetings.length)];
        }
        
        function toggleVoiceRecognition() {
            if (!SpeechRecognition) {
                statusText.textContent = "Speech recognition not supported in your browser";
                return;
            }
            
            if (isListening) {
                recognition.stop();
            } else {
                userInput.value = '';
                userInput.dispatchEvent(new Event('input'));
                recognition.start();
            }
        }
        
        function startVoiceRecognition() {
            if (!SpeechRecognition) {
                statusText.textContent = "Speech recognition not supported in your browser";
                return;
            }
            
            userInput.value = '';
            userInput.dispatchEvent(new Event('input'));
            recognition.start();
        }
        
        function stopVoiceRecognition() {
            if (isListening) {
                recognition.stop();
            }
        }
        
        function toggleSpeech() {
            isSpeechEnabled = !isSpeechEnabled;
            toggleSpeechBtn.querySelector('.voice-btn-text').textContent = 
                `Voice: ${isSpeechEnabled ? 'ON' : 'OFF'}`;
            toggleSpeechBtn.style.backgroundColor = isSpeechEnabled ? '' : 'var(--text-muted)';
            
            // Update icon
            const icon = toggleSpeechBtn.querySelector('i');
            if (isSpeechEnabled) {
                icon.classList.remove('fa-volume-mute');
                icon.classList.add('fa-volume-up');
            } else {
                icon.classList.remove('fa-volume-up');
                icon.classList.add('fa-volume-mute');
            }
        }
        
        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="message-content">
                        <div class="message-sender">${userName}</div>
                        <div>${message}</div>
                    </div>
                    <div class="message-avatar user-avatar">${userName.charAt(0)}</div>
                `;
            } else {
                // Check if message contains medical alerts
                let formattedMessage = message;
                if (message.includes('EMERGENCY') || message.includes('urgent') || message.includes('immediately')) {
                    formattedMessage = `<div class="medical-alert">${message}</div>`;
                } else if (message.includes('warning') || message.includes('caution')) {
                    formattedMessage = `<div class="medical-warning">${message}</div>`;
                } else if (message.includes('advice') || message.includes('recommend')) {
                    formattedMessage = `<div class="medical-advice">${message}</div>`;
                }
                
                messageDiv.innerHTML = `
                    <div class="message-avatar bot-avatar">D</div>
                    <div class="message-content">
                        <div class="message-sender">Dr. GenZ</div>
                        <div>${formattedMessage}</div>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function showTypingIndicator() {
            typingIndicator.style.display = 'flex';
            statusDot.classList.add('thinking');
        }
        
        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
            statusDot.classList.remove('thinking');
        }
        
        async function sendMessage() {
            if (!isChatStarted) {
                alert("Please complete the setup first.");
                return;
            }
            
            const message = userInput.value.trim();
            if (!message) return;
            
            // Check for emergency keywords
            const emergencyKeywords = ['heart attack', 'stroke', 'chest pain', 'difficulty breathing', 'severe bleeding', 'unconscious', 'suicidal'];
            const hasEmergency = emergencyKeywords.some(keyword => 
                message.toLowerCase().includes(keyword.toLowerCase())
            );
            
            if (hasEmergency) {
                addMessage(` MEDICAL EMERGENCY DETECTED: Based on your message, this may be a serious medical emergency. Please call your local emergency services (like 911) immediately or go to the nearest emergency room. Do not wait for a response from me.`, false);
                if (isSpeechEnabled) {
                    speakResponse("MEDICAL EMERGENCY DETECTED. Please call your local emergency services immediately or go to the nearest emergency room. Do not wait for a response from me.");
                }
            }
            
            // Add user message to chat
            addMessage(message, true);
            userInput.value = '';
            userInput.style.height = 'auto';
            
            // Add to conversation history
            conversationHistory.push({
                role: "user",
                content: message
            });
            
            // Show typing indicator
            showTypingIndicator();
            statusText.textContent = "Dr. GenZ is analyzing your symptoms...";
            sendBtn.disabled = true;
            
            try {
                // Get selected model
                const selectedModel = GROQ_MODELS["llama-3.1-8b-instant"];
                
                // Update system message with current specialty
                conversationHistory[0] = createSystemMessage();
                
                // Call Groq API
                const response = await fetch(GROQ_API_URL, {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        messages: conversationHistory,
                        model: selectedModel,
                        temperature: 0.7,
                        max_tokens: 1024,
                        stream: false
                    })
                });
                
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API error: ${response.status} - ${errorText}`);
                }
                
                const data = await response.json();
                
                // Extract the generated text from the response
                let botResponse = "I'm having trouble processing your request right now. Could you please rephrase your question?";
                if (data && data.choices && data.choices[0] && data.choices[0].message) {
                    botResponse = data.choices[0].message.content;
                    
                    // Add to conversation history
                    conversationHistory.push({
                        role: "assistant",
                        content: botResponse
                    });
                    
                    // Limit conversation history to prevent token overflow
                    if (conversationHistory.length > 12) {
                        conversationHistory = [
                            conversationHistory[0], // Keep system message
                            ...conversationHistory.slice(-10) // Keep last 10 exchanges
                        ];
                    }
                }
                
                // Add bot response to chat
                addMessage(botResponse);
                
                // Speak the response if enabled
                if (isSpeechEnabled) {
                    speakResponse(botResponse);
                } else {
                    statusText.textContent = "Waiting for your response";
                    hideTypingIndicator();
                    sendBtn.disabled = false;
                }
                
            } catch (error) {
                console.error("Error:", error);
                hideTypingIndicator();
                
                // Fallback response if API fails
                const fallbackResponses = [
                    "I'm experiencing technical difficulties right now. Please try again in a moment.",
                    "There seems to be a connection issue. Let's try that again.",
                    "I apologize, but I'm having trouble processing your request. Could you please rephrase your question?"
                ];
                
                const randomResponse = fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
                addMessage(randomResponse);
                statusText.textContent = "Connection issue - please try again";
                sendBtn.disabled = false;
            }
        }
        
        function speakResponse(text) {
            if ('speechSynthesis' in window) {
                // Stop any ongoing speech
                window.speechSynthesis.cancel();
                
                // Clean the text for speech (remove markdown, etc.)
                const cleanText = text.replace(/[#*\[\]_`]/g, '');
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                
                // Medical professional voice settings
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.volume = 0.8;
                
                utterance.onstart = function() {
                    statusText.textContent = "Dr. GenZ is speaking...";
                };
                
                utterance.onend = function() {
                    statusText.textContent = "Waiting for your response";
                    statusDot.classList.remove('thinking');
                    voiceInputBtn.style.color = "";
                    isListening = false;
                    userInput.focus();
                    hideTypingIndicator();
                    sendBtn.disabled = false;
                };
                
                utterance.onerror = function(event) {
                    console.error("Speech synthesis error:", event);
                    statusText.textContent = "Voice issue, but I've processed your request";
                    hideTypingIndicator();
                    sendBtn.disabled = false;
                };
                
                window.speechSynthesis.speak(utterance);
            } else {
                // If speech synthesis is not available, just reset the UI
                statusText.textContent = "Waiting for your response";
                statusDot.classList.remove('thinking');
                userInput.focus();
                hideTypingIndicator();
                sendBtn.disabled = false;
            }
        }
        
        // Initialize the voice visualizer
        initializeVoiceVisualizer();
        
        // Update specialty when changed
        modelSelect.addEventListener('change', function() {
            const specialtyText = this.options[this.selectedIndex].text;
            specialtyIndicator.textContent = specialtyText;
            
            if (isChatStarted) {
                conversationHistory[0] = createSystemMessage();
                addMessage(`I've switched to ${specialtyText} mode. How can I assist you with your health concerns?`, false);
                
                if (isSpeechEnabled) {
                    speakResponse(`I've switched to ${specialtyText} mode. How can I assist you with your health concerns?`);
                }
            }
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            // Close sidebar on resize to desktop if open
            if (window.innerWidth > 768 && isSidebarOpen) {
                toggleSidebar();
            }
        });
    </script>
</body>
</html>
